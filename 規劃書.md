
使用 Docker、WireGuard 與 Cloudflare 建構現代化、安全且可維護的個人 VPN

本報告旨在為技術嫻熟的實踐者提供一份詳盡的專家級指南，闡述如何利用 Docker、WireGuard 及 Cloudflare DDNS 等現代化工具，從零開始建構一個高效、安全且易於維護的個人 VPN 伺服器。報告內容不僅涵蓋了從基礎概念到實際部署的完整步驟，更深入探討了將設定檔存放於 GitHub 的「設定即程式碼」(Configuration as Code) 實踐、其安全意涵，並分析了為何不應將 VPN 伺服器直接架設於 GitHub Actions 等 CI/CD 平台之上。

第一部分：基礎技術選型與原理

在著手建構任何系統之前，理解其核心技術的選型理由至關重要。本專案選擇 WireGuard、Docker 與 Cloudflare DDNS 的組合，並非偶然，而是基於對現代網路安全、軟體部署及維運效率的策略性考量。

1.1 為何選擇 WireGuard：現代化的 VPN 協定

WireGuard 不僅僅是傳統 VPN 協定（如 OpenVPN）的一個替代品，它代表了 VPN 技術的一次範式轉移，其設計理念將簡潔性、卓越性能與最小化攻擊面置於首位，使其成為建構現代化個人 VPN 的不二之選 1。
簡潔性與可審計性：WireGuard 的核心程式碼僅約 4,000 行，與 OpenVPN 動輒數十萬行的龐大程式碼庫形成鮮明對比 3。這種極致的簡潔性本身就是一項關鍵的安全特性。精簡的程式碼庫使得安全專家（甚至單一個人）能夠在短時間內完成全面的程式碼審計，從而大幅降低了隱藏性漏洞存在的可能性 6。一個更小的攻擊面意味著潛在的攻擊入口更少，系統本質上更為安全。
卓越性能：在多項效能基準測試中，WireGuard 的速度始終顯著優於 OpenVPN，尤其在低延遲網路上，其速度可達 OpenVPN 的三倍以上 3。這得益於其採用的現代密碼學原件（如 ChaCha20、Poly1305）以及其在 Linux 核心層級的實現。作為一個核心模組運行，WireGuard 避免了在核心空間與使用者空間之間反覆複製資料所帶來的效能開銷，這是傳統 VPN 協定難以企及的優勢 4。
現代密碼學：WireGuard 採用了一套固定且最先進的密碼學演算法組合，包括用於金鑰交換的 Curve25519、用於對稱加密的 ChaCha20 以及用於雜湊的 BLAKE2s 7。與之相對，OpenVPN 雖然提供了高度的靈活性，允許使用者選擇多種加密套件，但這種靈活性也帶來了設定錯誤的風險，可能導致安全強度下降 4。WireGuard 的「武斷式」(opinionated) 設計哲學消除了這種風險，確保所有連線預設都達到最高安全標準。
選擇 WireGuard 是一項策略性的安全決策，而不僅僅是為了效能最佳化。一個更小、更不易出錯的程式碼庫直接轉化為更小的攻擊面和更低的長期維護負擔，這是建構任何安全系統時的首要考量。
表 1：WireGuard 與 OpenVPN 特性及效能比較
特性
WireGuard
OpenVPN
程式碼庫大小
約 4,000 行 4
數十萬行 3
平均速度
通常比 OpenVPN 快 3.2 倍 3
基準速度
密碼學
固定、現代化套件 (ChaCha20, Poly1305) 4
靈活、可協商 (AES, OpenSSL) 6
設定複雜度
極簡，類似 SSH 金鑰交換 2
複雜，選項繁多 4
攻擊面
非常小 5
較大 6
網路漫遊處理
無縫，自動重新建立連線 5
可能中斷，重新連線較慢 4


1.2 容器化的力量：為何 Docker 至關重要

Docker 是本專案的理想部署平台，它能將整個 VPN 服務及其所有依賴項封裝成一個標準化、隔離且可移植的單元，稱為容器 15。
環境隔離：Docker 容器在相互隔離的環境中運行，有效避免了與主機上其他應用程式之間的潛在衝突 8。如同「獨立的魚缸」比喻，一個 WireGuard 容器不會影響到同一主機上的網頁伺服器，反之亦然 17。
依賴管理：Docker 映像檔 (image) 包含了執行應用所需的一切，包括函式庫、工具和設定。這徹底解決了「在我的機器上可以運作」的傳統難題，確保了無論部署在何處，執行環境都完全一致 17。
使用 Docker Compose 實現可重複性：Docker Compose 工具允許我們在一個名為 docker-compose.yml 的 YAML 檔案中，以宣告式的方式定義整個多容器應用程式（包括 VPN 伺服器和 DDNS 客戶端）。這個檔案成為了應用程式設定的「單一事實來源」(single source of truth)，使得一鍵部署和一致性設定成為可能 18。
可移植性：基於 Docker 的設定可以輕鬆地從一台主機遷移到另一台（例如，從樹莓派遷移到更強大的伺服器），只需移動 docker-compose.yml 檔案和相關的資料卷 (volume) 即可，幾乎無需修改 15。
在此專案中，Docker 不僅是一個部署工具，更是實現「設定即程式碼」(Configuration as Code, CaC) 理念的基石。透過使用 Docker，我們將整個應用程式的架構——服務、網路、資料卷、環境變數——轉化為一個可讀、可版本控制的文字檔案。這個將基礎設施「程式碼化」的過程，是後續使用 Git 等工具進行現代化管理的第一步，也是最關鍵的一步。

1.3 管理動態 IP：Cloudflare DDNS 的角色

對於大多數家庭網路連線而言，其公網 IP 位址是動態變化的。這意味著 IP 位址會不定期地由網際網路服務供應商 (ISP) 更改。為了讓遠端的 VPN 客戶端能夠持續找到我們的伺服器，一個動態 DNS (Dynamic DNS, DDNS) 服務是必不可少的。
問題：VPN 客戶端需要一個穩定不變的位址（例如 vpn.yourdomain.com）來連線。如果家庭網路的公網 IP 改變了，這個域名必須被即時更新，以指向新的 IP 位址。
解決方案：在伺服器上執行一個 DDNS 客戶端程式。它會定期檢查伺服器的當前公網 IP，一旦發現變化，便會利用 Cloudflare 的 API 自動更新對應的 DNS 記錄 20。本報告選擇 Cloudflare 作為 DDNS 服務商，因其提供強大穩定的 API、慷慨的免費方案，以及額外的安全優勢。

第二部分：前置作業與伺服器初始準備

在部署核心服務之前，必須完成一系列關鍵的前置作業。這些步驟旨在確保我們的硬體、網路環境和外部依賴項都已準備就緒，並遵循了安全最佳實踐。

2.1 伺服器與網路需求

硬體：一套中低階硬體即可滿足需求，例如樹莓派 4 (Raspberry Pi 4)、閒置的筆記型電腦或一台小型虛擬專用伺服器 (VPS)。關鍵在於擁有一個穩定的網路連線 24。
作業系統：建議使用現代化的 Linux 發行版，如 Ubuntu Server 或 Debian，因為它們對 Docker 和 WireGuard 提供了絕佳的支援 25。
網路存取：需要擁有家庭路由器的管理員權限，以便設定連接埠轉送 (port forwarding)。

2.2 關鍵前提：診斷電信級 NAT (CGNAT)

在進行任何設定之前，必須執行一項至關重要的檢查：確認您的 ISP 是否使用了電信級 NAT (Carrier-Grade NAT, CGNAT)。如果答案是肯定的，本報告描述的直接連接方案將無法實現，因為 CGNAT 會阻止必要的連接埠轉送。
什麼是 CGNAT？ CGNAT 是一種網路位址轉譯技術，ISP 為了節省日益枯竭的 IPv4 位址資源，會讓多個使用者共享同一個公網 IPv4 位址。這意味著您並沒有一個獨一無二、可從公網直接路由的 IP 位址 26。
如何檢查是否處於 CGNAT 環境？
登入您家庭路由器的管理介面，找到並記錄下「WAN IP 位址」或「網際網路 IP 位址」。
在連接到該網路的電腦上，開啟瀏覽器並訪問一個公網 IP 查詢網站，例如 whatismyipaddress.com 或 ip.me 28。
比較這兩個 IP 位址。如果兩者不相同，那麼您幾乎可以肯定正處於 CGNAT 環境中。此外，如果路由器的 WAN IP 位址落在 100.64.0.0/10 這個專門為 CGNAT 保留的位址區段內，這也是一個明確的指標 26。
CGNAT 是一個「沉默的專案殺手」。使用者可能完美地遵循了所有設定步驟，但 VPN 連線最終仍會因無法建立握手而失敗 33。將此檢查置於最前端，可以避免大量不必要的時間浪費和挫敗感，是整個專案的關鍵「可行/不可行」決策點。若您處於 CGNAT 環境，請直接參考本報告的「繞過 CGNAT 的替代架構」章節。

2.3 域名與 Cloudflare 帳號設定

您需要擁有一個自己的域名，並在 Cloudflare 註冊一個免費帳號。完成後，根據 Cloudflare 的指引，將您域名的名稱伺服器 (Nameservers) 指向 Cloudflare 提供的位址 34。

2.4 保護 Cloudflare 存取：建立最小權限 API 權杖

為了讓 DDNS 客戶端能夠自動更新 DNS 記錄，我們需要一個 Cloudflare API 權杖 (Token)。出於安全考量，絕對不要使用具有帳戶所有權限的「全域 API 金鑰」(Global API Key)。我們必須遵循「最小權限原則」(Principle of Least Privilege, PoLP)，建立一個僅擁有必要權限的 API 權杖。
最小權限原則 (PoLP)：此原則要求任何使用者或服務只應被授予執行其功能所必需的最小權限 35。一個被洩漏的全域 API 金鑰將使攻擊者完全控制您的整個 Cloudflare 帳戶；而一個範圍受限的權杖則能將潛在的損害半徑降至最低 37。
建立權杖的詳細步驟：
登入 Cloudflare 儀表板，點擊右上角使用者圖示，選擇「我的設定檔」，然後在左側導覽列點選「API 權杖」。
點擊「建立權杖」。
從範本中選擇「編輯區域 DNS」作為起點 36。
權限設定：這是最關鍵的一步。確認權杖只擁有 區域:DNS:編輯 (Zone:DNS:Edit) 這一項權限 22。
區域資源：將權杖的適用範圍限定於 包含 -> 特定區域 -> yourdomain.com。這能防止該權杖被用於修改您帳戶下的其他域名 36。
繼續並建立權杖。請務必立即將產生的權杖字串複製並儲存到安全的地方（如密碼管理器），因為它只會顯示一次 36。
表 2：DDNS 所需的 Cloudflare API 權杖權限

權限
範圍
必要存取權
Zone:DNS
Include -> Specific Zone -> yourdomain.com
Edit
Zone:Zone
Include -> Specific Zone -> yourdomain.com
Read
Account:Account
Include -> [Your Account]
None (不需此權限)

資料來源：22

2.5 主機系統強化與連接埠轉送

防火牆設定 (UFW)：
安裝並啟用 UFW (Uncomplicated Firewall)。
設定預設拒絕所有傳入連線：sudo ufw default deny incoming。
允許 SSH 連線（以便遠端管理）：sudo ufw allow ssh。
允許 WireGuard 的 UDP 連接埠（預設為 51820）：sudo ufw allow 51820/udp 42。
連接埠轉送 (Port Forwarding)：
登入您的家庭路由器管理介面。
找到「連接埠轉送」、「虛擬伺服器」或類似名稱的設定頁面 43。
建立一條新規則，將外部的 UDP 連接埠 51820（或您自訂的連接埠）轉送到您 Docker 主機的內部 IP 位址上的同一個連接埠 45。

第三部分：使用 Docker Compose 部署核心 VPN 伺服器

完成前置作業後，現在可以開始部署核心的 WireGuard 服務。本節將引導您選擇合適的 Docker 映像檔，並透過 docker-compose.yml 檔案進行宣告式設定。

3.1 Docker 映像檔選擇：比較分析

在 Docker Hub 上有多個廣受歡迎的 WireGuard 映像檔。對於一個優先考慮「設定即程式碼」和自動化的專案，linuxserver/wireguard 映像檔是比 wg-easy 等帶有 Web UI 的方案更優越的選擇。
linuxserver/wireguard：這是一個由社群維護、極受歡迎的映像檔。其所有設定完全透過環境變數完成，這使其非常適合在 docker-compose.yml 中進行宣告式管理。它能根據設定的環境變數自動產生伺服器設定、客戶端設定檔 (peer configs) 和 QR code，實現了高度自動化 47。
wg-easy：此映像檔提供了一個便利的 Web UI，讓使用者可以透過圖形介面輕鬆管理客戶端 50。雖然對手動管理非常友好，但這種方式與「設定即程式碼」的理念產生了脫節。客戶端的設定被儲存在由 UI 管理的資料庫或資料卷中，而不是宣告在
docker--compose.yml 裡。這意味著，您的 Git 儲存庫將不再是整個系統設定的「單一事實來源」。
映像檔的選擇直接決定了後續的整體管理哲學。使用者的查詢中提到了將設定檔儲存於 Git，這暗示了其對宣告式、可版本控制的設定方式的偏好。wg-easy 引入了一個命令式的、有狀態的 UI 層 53。如果在 UI 中新增了一個客戶端，這個變更並不會反映在 Git 的
docker-compose.yml 中，從而產生了「設定漂移」(configuration drift)，破壞了 CaC 的核心優勢。相比之下，linuxserver/wireguard 強制將所有設定，包括客戶端列表，都納入 docker-compose.yml 檔案中 47。要新增客戶端，只需編輯
PEERS 環境變數並重新部署即可。這確保了 Git 作為唯一的真實來源，與現代的 GitOps 工作流程完美契合。因此，linuxserver/wireguard 是達成此報告目標的技術上正確的選擇。

3.2 撰寫 docker-compose.yml 檔案（僅 WireGuard）

以下是一個經過註解的 docker-compose.yml 範例，用於部署 WireGuard 服務。請將其儲存在一個新的專案目錄中。

YAML


version: "3.8"
services:
  wireguard:
    image: lscr.io/linuxserver/wireguard:latest
    container_name: wireguard
    cap_add:
      - NET_ADMIN
      - SYS_MODULE
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Taipei # 請根據您的時區修改
      - SERVERURL=${CF_SUBDOMAIN}.${CF_ZONE} # 從 .env 檔案動態讀取
      - SERVERPORT=51820 # 可選，應與路由器轉送的連接埠一致
      - PEERS=laptop,phone # 以逗號分隔的客戶端名稱列表
      - PEERDNS=auto # 可設定為特定 DNS，如 1.1.1.1
      - INTERNAL_SUBNET=10.13.13.0 # 可選，僅在與現有網路衝突時修改
      - ALLOWEDIPS=0.0.0.0/0, ::/0 # 路由所有流量通過 VPN (全隧道模式)
    volumes:
      - ./config:/config
      - /lib/modules:/lib/modules:ro
    ports:
      - "51820:51820/udp"
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
    restart: unless-stopped

  cloudflare-ddns:
    image: ghcr.io/rycochet/docker-cloudflare-ddns:latest
    container_name: cloudflare-ddns
    network_mode: host # 關鍵設定：使用主機網路以準確獲取 IP
    environment:
      - API_KEY=${CF_API_TOKEN} # 從 .env 檔案讀取
      - ZONE=${CF_ZONE} # 從 .env 檔案讀取
      - SUBDOMAIN=${CF_SUBDOMAIN} # 從 .env 檔案讀取
      - PROXIED=false # VPN 流量不能通過 Cloudflare 代理
    restart: unless-stopped


此範例檔案中的 cap_add 賦予容器必要的網路管理權限，volumes 用於持久化設定檔，ports 將主機的 UDP 連接埠對應到容器，而 sysctls 則是用於調整核心參數以確保網路功能正常 47。

3.3 環境變數深度解析

由於 linuxserver/wireguard 的所有設定都由環境變數驅動，理解這些變數的功能至關重要。它們構成了我們「設定即程式碼」方法的 "API"。
表 3：linuxserver/wireguard Docker 環境變數詳解
變數
功能
範例值
備註
PUID/PGID
設定容器內程序執行的使用者和群組 ID，以避免檔案權限問題。
1000
應與主機上管理 Docker 的使用者 ID 相符。可使用 id 指令查詢。 57
TZ
指定容器的時區。
Asia/Taipei
確保日誌時間戳的準確性。 58
SERVERURL
客戶端用來連線的伺服器公網位址。
vpn.yourdomain.com
必須設定。應為您的 DDNS 主機名稱或靜態 IP。 47
SERVERPORT
伺服器監聽的公網 UDP 連接埠。
51820
可選，預設為 51820。應與路由器轉送的連接埠一致。 47
PEERS
要產生的客戶端設定檔數量或名稱列表。
laptop,phone,tablet 或 3
必須設定以啟用伺服器模式。這是管理客戶端的關鍵。 47
PEERDNS
設定客戶端連線後使用的 DNS 伺服器。
auto 或 1.1.1.1,8.8.8.8
auto 會使用 Docker 主機的 DNS。可設為公共 DNS 或您自己的 Pi-hole。 47
INTERNAL_SUBNET
WireGuard 隧道的內部子網路。
10.13.13.0
可選，預設為 10.13.13.0。僅在與您現有網路衝突時修改。 60
ALLOWEDIPS
設定客戶端可以透過 VPN 存取的 IP 範圍。
0.0.0.0/0, ::/0
0.0.0.0/0 表示全隧道模式（所有流量都走 VPN）。可設定為特定內網網段以實現分割隧道。 47
PERSISTENTKEEPALIVE_PEERS
為特定客戶端啟用持續性 keep-alive 封包。
all 或 laptop,phone
可選。有助於維持 NAT 後方客戶端的連線穩定性。 47
LOG_CONFS
是否在 Docker 日誌中輸出客戶端設定的 QR code。
true
可選，預設為 true。方便手機客戶端快速設定。 47

資料來源：47

3.4 部署、驗證與客戶端管理

部署：在存放 docker-compose.yml 檔案的目錄中，執行 docker compose up -d。Docker 將會下載映像檔並在背景啟動容器。
驗證：使用 docker compose logs -f wireguard 指令查看容器的即時日誌。您應該能看到伺服器成功啟動，並為每個 PEER 產生了設定檔和 QR code 47。
客戶端管理：新增或移除客戶端非常簡單。只需編輯 docker-compose.yml 中的 PEERS 環境變數，然後再次執行 docker compose up -d。容器會自動偵測變更，並建立或刪除對應的客戶端設定資料夾，而不會影響現有客戶端的金鑰 48。

第四部分：動態 DNS (DDNS) 整合

為了確保我們的 VPN 伺服器在公網 IP 變動後依然可以被存取，我們需要整合一個 DDNS 客戶端。將其作為另一個服務加入到我們的 Docker Compose 堆疊中，可以實現完全自動化的解決方案。

4.1 實作 DDNS Docker 容器

一個專用的 DDNS 容器，與 WireGuard 服務一起由 Docker Compose 管理，是確保 VPN 端點持續可達的最佳實踐。
映像檔選擇：社群中有許多可靠的 Cloudflare DDNS 映像檔。oznu/cloudflare-ddns 曾是熱門選擇，但已較少維護。rycochet/docker-cloudflare-ddns 作為其活躍的後繼者，以及 favonia/cloudflare-ddns 都是優秀的選擇 62。本報告將採用
rycochet/docker-cloudflare-ddns，因其設定簡潔明瞭。
關鍵設定：network_mode: host
一個 Docker 容器預設擁有自己獨立的網路命名空間。如果它嘗試偵測自己的公網 IP，很可能會得到 Docker NAT 閘道的內部 IP。雖然一些 DDNS 客戶端可以透過訪問外部「what-is-my-ip」服務來解決此問題，但這種方法可能不夠穩定。最可靠的方法是將 DDNS 容器的網路模式設定為 host 62。這使得容器能共享主機的網路堆疊，直接存取面向公網的網路介面，從而最準確地獲取真實的公網 IP 位址。這是一個細微但對系統穩健性至關重要的設定細節。

4.2 完整的 docker-compose.yml 堆疊

現在，我們將 DDNS 服務加入到 docker-compose.yml 檔案中，形成一個完整的、自我維持的解決方案。為了安全起見，像 API 權杖這樣的敏感資訊應該透過環境變數檔案 (.env) 來管理，而不是直接寫在 docker-compose.yml 中。
1. 建立 .env 檔案：
在與 docker-compose.yml 相同的目錄下，建立一個名為 .env 的檔案，內容如下：

Code snippet


#.env file
# Cloudflare DDNS Settings
CF_API_TOKEN=your_cloudflare_api_token_here # 貼上您在 2.4 節建立的權杖
CF_ZONE=yourdomain.com # 您的根域名
CF_SUBDOMAIN=vpn # 您要更新的子域名，例如 vpn.yourdomain.com


2. 更新 docker-compose.yml 檔案：
將 docker-compose.yml 修改為以下完整版本：

YAML


version: "3.8"
services:
  wireguard:
    image: lscr.io/linuxserver/wireguard:latest
    container_name: wireguard
    cap_add:
      - NET_ADMIN
      - SYS_MODULE
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Taipei
      - SERVERURL=${CF_SUBDOMAIN}.${CF_ZONE} # 從.env 檔案動態讀取
      - SERVERPORT=51820
      - PEERS=laptop,phone
      - PEERDNS=auto
      - INTERNAL_SUBNET=10.13.13.0
      - ALLOWEDIPS=0.0.0.0/0, ::/0
    volumes:
      -./config:/config
      - /lib/modules:/lib/modules:ro
    ports:
      - "51820:51820/udp"
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
    restart: unless-stopped

  cloudflare-ddns:
    image: ghcr.io/rycochet/docker-cloudflare-ddns:latest
    container_name: cloudflare-ddns
    network_mode: host # 關鍵設定：使用主機網路以準確獲取 IP
    environment:
      - API_KEY=${CF_API_TOKEN} # 從.env 檔案讀取
      - ZONE=${CF_ZONE} # 從.env 檔案讀取
      - SUBDOMAIN=${CF_SUBDOMAIN} # 從.env 檔案讀取
      - PROXIED=false # VPN 流量不能通過 Cloudflare 代理
    restart: unless-stopped


完成後，再次執行 docker compose up -d，這將同時啟動 WireGuard 伺服器和 DDNS 客戶端。DDNS 容器將會定期檢查您的公網 IP，並在需要時自動更新 vpn.yourdomain.com 的 DNS 記錄。

第五部分：客戶端設定與連線

伺服器部署完成後，下一步是設定您的個人裝置（如筆記型電腦、手機）以連線到 VPN。

5.1 尋找與管理客戶端設定檔

linuxserver/wireguard 容器會為 PEERS 環境變數中列出的每個客戶端，自動產生對應的設定檔和 QR code。
檔案位置：這些檔案位於您對應到容器內 /config 目錄的主機路徑下。根據我們的範例，它們將位於 ./config/peer_laptop 和 ./config/peer_phone 等子目錄中 48。每個目錄下最重要的檔案是
.conf 結尾的設定檔。
QR Code：QR code 可以透過兩種方式取得：
直接在終端機中查看容器日誌：docker compose logs wireguard。
在上述的客戶端設定資料夾中找到儲存為 .png 格式的圖片檔。

5.2 設定桌面與行動裝置客戶端

您需要在您的裝置上安裝官方的 WireGuard 客戶端應用程式。
行動裝置（Android/iOS）：最快捷的方式是使用 QR code 掃描功能。打開 WireGuard 手機應用，點擊新增隧道按鈕，選擇「從 QR code 掃描」，然後掃描您從伺服器日誌或 PNG 檔案中得到的 QR code。應用程式將會自動填入所有設定 67。
桌面裝置（Windows/macOS/Linux）：將對應的 .conf 設定檔從伺服器安全地傳輸到您的桌面電腦上。打開 WireGuard 桌面客戶端，選擇「從檔案匯入隧道」，然後選取該 .conf 檔案即可 68。

5.3 驗證連線與流量路由

如何確認 VPN 是否已成功連線並正常運作？
握手驗證：在客戶端應用中，一個成功的連線會顯示一個最近的「最後交握」(latest handshake) 時間戳 67。在伺服器端，您可以執行
docker exec wireguard wg show 指令，它會列出所有已連線的客戶端及其握手狀態。
IP 位址驗證：這是驗證所有流量是否正確通過 VPN 隧道的最終測試。
步驟一：在連線 VPN 之前，訪問 whatismyipaddress.com 28 或類似網站，記錄下您當前真實的公網 IP 位址。
步驟二：啟動 VPN 連線。
步驟三：重新整理 IP 查詢網站。此時，您看到的 IP 位址應該已經變為您家庭伺服器的公網 IP 位址。這證明您的網路流量已成功地經由您的個人 VPN 伺服器進行路由 71。

第六部分：進階主題與最佳實踐

一個功能正常的 VPN 只是開始。本節將探討如何將您的設定提升到一個更專業、更易於管理的水平，涵蓋了設定即程式碼、備份與災難復原，以及應對特殊網路環境的策略。

6.1 設定即程式碼：將 docker-compose.yml 存放於 GitHub

將您的 docker-compose.yml 檔案儲存在 Git 儲存庫中，是採納「設定即程式碼」(CaC) 理念的核心實踐。這不僅僅是為了備份，更是為了實現可追蹤、可重複和自動化的基礎設施管理。

6.1.1 CaC 的優勢

版本控制：Git 為您的基礎設施設定提供了完整的變更歷史。您可以清晰地看到誰、在何時、以及為何（透過 commit 訊息）對系統進行了何種修改 73。
可追蹤性與可審計性：所有變更都有據可查，形成了一條清晰的審計軌跡，這對於理解系統的演進和排查問題至關重要 74。
可重複性：當需要部署一個新伺服器時，只需從 Git 儲存庫中克隆設定檔，然後執行 docker compose up 即可完美複製現有環境。這是災難復原的基礎 74。

6.1.2 安全意涵與最佳實踐

直接將 docker-compose.yml 推送到公共儲存庫是極其危險的行為。以下是必須遵守的安全最佳實踐：
使用私有儲存庫：這是最基本且不可妥協的要求。公開您的 docker-compose.yml 等同於向全世界洩漏您伺服器的架構、服務版本、內部網路規劃以及潛在的弱點，為攻擊者提供了詳細的攻擊藍圖。
嚴格的密鑰管理：絕對不要將任何敏感資訊（如 Cloudflare API 權杖、密碼等）直接硬編碼到 docker-compose.yml 檔案中並提交到 Git。
正確的整合 Git 與部署的方式，是將 GitHub Actions 作為 CI/CD 工具，而非主機。一個健全的 GitOps 工作流程應如下所示：
將 docker-compose.yml 檔案存放在一個私有的 GitHub 儲存庫中。
將所有敏感值，如 CF_API_TOKEN，儲存在該儲存庫的「Settings」->「Secrets and variables」->「Actions secrets」中 76。
建立一個 GitHub Actions 工作流程檔案（例如 .github/workflows/deploy.yml），設定其在 main 分支有 push 事件時觸發。
該工作流程的步驟應包括：
安全地 SSH 連線到您的家庭伺服器。
在伺服器上執行 git pull，以獲取最新的 docker-compose.yml。
使用從 GitHub Secrets 傳入的環境變數來啟動服務，指令如下：CF_API_TOKEN=${{ secrets.CF_API_TOKEN }} docker compose up -d。
這種方式實現了真正的 GitOps 模式：Git 儲存庫是系統狀態的唯一事實來源，任何變更都會被自動且安全地部署到生產環境中 76。這是一種強大且現代化的基礎設施管理方法，完美回應了使用者對現代化管理的潛在需求。

6.2 維運管理：備份與災難復原策略


6.2.1 備份策略

設定備份：您的 Git 儲存庫本身就是 docker-compose.yml 設定檔的最佳備份。
狀態備份：最關鍵的狀態資料是您對應到 /config 的 Docker 資料卷。這個資料卷包含了伺服器的私鑰以及所有客戶端的公鑰和預共享金鑰等核心資訊 48。
備份程序：
定期停止容器以確保資料一致性：docker compose down。
將 ./config 目錄打包成一個加密的壓縮檔（例如 tar.gz）。
將此備份檔案儲存到一個安全的、異地（off-site）的位置，例如加密的雲端儲存或另一台實體裝置。
備份完成後，重新啟動容器：docker compose up -d 78。

6.2.2 容器更新策略

最佳實踐：對於像 VPN 閘道這樣的關鍵基礎設施，應避免使用 Watchtower 等工具進行無人值守的自動更新 80。一次失敗的更新可能會導致您被鎖在自己的網路之外。
建議的手動更新流程：
docker compose pull：此指令會下載 docker-compose.yml 中定義的映像檔的最新版本，但不會停止正在運行的容器 78。
docker compose up -d：此指令會比較現有容器與新下載的映像檔，並僅重新建立那些映像檔已更新的容器，從而最大限度地減少服務中斷時間 81。
docker image prune -f：可選步驟，用於清理舊的、未被使用的映像檔層，以釋放磁碟空間 81。

6.3 繞過 CGNAT：替代架構概述

如果經過診斷，您確定自己處於 CGNAT 環境下，那麼直接的連接埠轉送將無法實現。解決方案是利用一台擁有公網 IP 的中介伺服器（通常是 VPS）來建立隧道。
Cloudflare Tunnel 的局限性：雖然 Cloudflare Tunnel 對於保護 HTTP/S 流量非常出色，但其免費方案不支援 UDP 協定，而 WireGuard 正是基於 UDP 運作的 83。因此，Cloudflare Tunnel 並非此特定場景下的可行方案。
VPS 反向隧道方案：
架構：租用一台便宜的 VPS 84。從您的家庭伺服器（在此情境下是「客戶端」）建立一個持久的 WireGuard 隧道，連線到 VPS（在此情境下是「伺服器」）。
流量走向：外部的 VPN 客戶端（您的手機、筆電）連線到 VPS 的公網 IP。VPS 上的防火牆規則（iptables）會將收到的 WireGuard 流量，透過已建立的內部隧道，轉發到您的家庭伺服器 86。
成本與複雜度：此方案會增加一筆小額的 VPS 月費，但對於繞過 CGNAT 以傳輸非 HTTP 流量而言，這是最穩健、最靈活的解決方案 87。

第七部分：分析：在 GitHub Actions 上託管 VPN 的不可行性

將一個持續運行的 VPN 伺服器部署在 GitHub Actions 上是一個常見的誤解。從技術架構和服務條款兩個層面來看，這都是不可行的。

7.1 GitHub Actions 的設計目的：CI/CD vs. 持久性託管

核心論點：GitHub Actions 是一個用於持續整合與持續部署 (CI/CD) 的事件驅動自動化平台，其設計初衷是執行短暫、一次性的任務，而非提供 24/7 的伺服器託管服務 89。
短暫性 (Ephemeral)：執行器 (Runner) 是為了執行特定工作而臨時建立的虛擬機，任務完成後即被銷毀 91。而 VPN 伺服器必須持續不斷地運行。
無狀態 (Stateless)：執行器本身是無狀態的。任何在運行期間產生的設定或資料，除非被明確儲存為「產物」(artifact)，否則都會隨著執行器的銷毀而遺失。VPN 伺服器則需要持久化的狀態（如金鑰、對等點連線資訊）92。

7.2 技術層面的障礙

無固定 IP：執行器被分配的 IP 位址是從一個巨大的 IP 池中動態選取的，無法提供一個穩定的連線端點 93。
入站連線被阻擋：GitHub 的基礎設施使用了嚴格的 NAT 和防火牆策略，會阻擋所有未經請求的入站流量。使用者無法在執行器上開放或轉送任何連接埠（如 UDP 51820）94。雖然存在 NAT 穿透技術 96，但在一個非設計用途的平台上嘗試這些技術，不僅極不穩定，也違反了平台的使用初衷。

7.3 違反 GitHub 的可接受使用政策

核心論點：嘗試在 GitHub Actions 上運行 VPN 伺服器，同時違反了 GitHub 服務條款的精神和明文規定。
被禁止的活動：條款明確禁止在 GitHub 託管的執行器上進行「加密貨幣挖礦」以及「任何與軟體專案的生產、測試、部署或發布無關的其他活動」90。個人 VPN 顯然屬於「無關活動」的範疇。
不成比例的負擔：條款同樣禁止「使用我們的伺服器進行任何形式的過度自動化大量活動」，或對伺服器造成「與為使用者帶來的好處不成比例的負擔」90。一個持續運作並可能承載大量網路流量的公共閘道，極易被解釋為此類濫用行為。
後果：濫用 GitHub Actions 可能導致任務被終止、使用權限受限，甚至在某些情況下，導致儲存庫被禁用或帳戶被停權 90。

第八部分：專案管理與自動化工具

在完成基礎部署後，高效的管理工具對於長期維運至關重要。本專案提供了完整的自動化管理解決方案。

8.1 自動化設定腳本

為了簡化初始部署過程，專案包含了一個全自動的設定腳本 `scripts/setup.sh`，該腳本會：

- 自動安裝所有必要的系統依賴項（Docker、UFW、Git 等）
- 設定正確的防火牆規則和系統參數
- 建立必要的目錄結構
- 檢查潛在的網路環境問題

8.2 服務管理工具

`scripts/manage.sh` 提供了一個統一的服務管理介面，支援以下操作：

- **服務控制**: start、stop、restart、status
- **監控功能**: logs、peers、check
- **維護操作**: update、backup、qr code 生成
- **故障診斷**: 全面的系統健康檢查

這種集中化的管理方式大幅簡化了日常維運工作，並減少了人為錯誤的可能性。

第九部分：常見問題疑難排解

即使設定正確，在實際使用中也可能遇到問題。本節提供了一個常見問題的排查指南。

9.1 診斷握手失敗問題

症狀：客戶端已連線，但「最後交握」時間戳始終為「(無)」，且沒有任何流量。
常見原因與解決方案：
防火牆阻擋：伺服器端的防火牆 (UFW) 或家庭路由器未正確開放 UDP 連接埠。請仔細檢查 UFW 規則和路由器的連接埠轉送設定 98。
金鑰錯誤：公鑰與私鑰不匹配。反覆確認客戶端的公鑰已正確填入伺服器的對等點設定中，且伺服器的公鑰也已正確填入客戶端的對等點設定中 99。
端點 (Endpoint) 錯誤：客戶端設定中的 Endpoint 位址或連接埠不正確。確保其與伺服器的 DDNS 名稱和轉送的連接埠完全一致 101。
CGNAT 問題：如第二部分所述，這是導致握手失敗的隱蔽殺手。若其他檢查均無問題，應再次確認是否存在 CGNAT 33。
除錯工具：在伺服器上使用 watch -n 1 docker exec wireguard wg show 指令，可以即時監控客戶端的連線狀態和握手情況 100。

9.2 解決「已連線但無法上網」的情境

症狀：握手成功，但客戶端無法存取網際網路或內網資源。
常見原因與解決方案：
DNS 問題：這是最常見的原因。客戶端設定中指定的 DNS 伺服器（例如 1.1.1.1 或您的 Pi-hole IP）無法通過隧道存取。
測試：在已連線的客戶端上，嘗試 ping 8.8.8.8。如果此指令成功，但 ping google.com 失敗，即可確定是 DNS 解析問題 102。
修復：確保客戶端設定中的 AllowedIPs 包含了 DNS 伺服器的 IP 位址。最簡單的方法是將 AllowedIPs 設定為 0.0.0.0/0, ::/0，這會將包括 DNS 查詢在內的所有流量都強制通過 VPN 隧道 104。
IP 轉送/偽裝問題：伺服器未能正確地將來自 VPN 介面的封包轉發到網際網路。linuxserver/wireguard 映像檔通常會透過其 PostUp 指令碼自動設定 iptables 規則來處理此問題，但若設定有誤則可能失敗。確保主機已啟用 IP 轉送（net.ipv4.ip_forward=1）100。

9.3 Docker 與 UFW 防火牆的衝突

核心問題：Docker 會直接操作 iptables，並將其規則插入到 DOCKER-USER 鏈的頂部，此鏈的處理優先序高於 UFW 的規則。這會導致 Docker 發佈的連接埠繞過 UFW 的 deny 規則，直接暴露於公網 105。
潛在風險：使用者可能設定了 sudo ufw default deny incoming 並認為伺服器是安全的，但一個簡單的 docker run -p 8080:80 指令仍然會將 8080 連接埠暴露給全世界，因為 Docker 的 iptables 規則優先執行。
本專案的解決方案：由於我們只暴露了 WireGuard 的 UDP 連接埠，並且已在 UFW 中明確允許了該連接埠 (sudo ufw allow 51820/udp)，因此在本專案的特定情境下，此衝突的直接風險較小。然而，對於在同一主機上運行其他 Docker 容器的使用者來說，理解這一點至關重要。對於更複雜的環境，存在如 ufw-docker 這樣的工具可以更好地整合兩者 105。
表 4：常見 WireGuard 問題排解指南

症狀
可能原因
檢查步驟
解決方案
無握手
防火牆阻擋
檢查伺服器 UFW 規則 (sudo ufw status) 和路由器連接埠轉送設定。
確保 UDP 51820 (或自訂連接埠) 已允許並正確轉送。


金鑰不匹配
在伺服器和客戶端上仔細核對公鑰。
重新複製貼上正確的公鑰。


端點錯誤
檢查客戶端設定中的 Endpoint 位址和連接埠。
確保其與伺服器的 DDNS 名稱和轉送的連接埠一致。


ISP 使用 CGNAT
比較路由器 WAN IP 與公網 IP。
若確定為 CGNAT，需採用 VPS 反向隧道方案。
有握手，但無法上網
DNS 解析失敗
在客戶端 ping 8.8.8.8 (成功) 和 ping google.com (失敗)。
修改客戶端設定，將 AllowedIPs 設為 0.0.0.0/0, ::/0。


伺服器路由問題
檢查伺服器端的 IP 轉送是否啟用。
確保 net.ipv4.ip_forward=1。linuxserver 映像檔通常會處理。
有握手，但無法存取內網
AllowedIPs 設定不當
檢查客戶端設定中的 AllowedIPs 是否包含內網網段。
將內網網段 (如 192.168.1.0/24) 加入 AllowedIPs。


伺服器防火牆阻擋
檢查伺服器防火牆是否阻擋了從 wg0 介面到內網的流量。
新增 UFW 規則以允許相關流量。


結論與建議

本報告詳細闡述了利用 Docker、WireGuard 和 Cloudflare DDNS 建構一個現代化個人 VPN 的完整流程。此架構不僅提供了卓越的性能和頂級的安全性，更透過引入「設定即程式碼」和 GitOps 的理念，配合完整的自動化管理工具，實現了高度自動化、可重複且易於維護的系統管理模式。
核心結論與建議如下：
技術選型是成功的基石：選擇 WireGuard 是出於其簡潔性、高性能和內建的安全性。選擇 Docker 則是為了實現環境隔離、依賴管理和可重複部署。這兩者的結合是建構現代化自託管服務的黃金標準。
前置檢查至關重要：在投入時間和精力之前，必須診斷是否存在 CGNAT。這項簡單的檢查可以避免後續大量的無效工作。同時，嚴格遵循最小權限原則建立 Cloudflare API 權杖，是保護您數位資產的第一道防線。
擁抱「設定即程式碼」(CaC)：將您的 docker-compose.yml 存放在私有 Git 儲存庫中，並將所有敏感資訊透過 GitHub Secrets 進行管理。這不僅是備份，更是實現基礎設施版本控制和災難快速復原的關鍵。
正確使用 CI/CD 工具：GitHub Actions 不適合用於託管持久性服務。其正確的用途是作為自動化部署的引擎。一個成熟的 GitOps 工作流程——即在 Git 中提交變更，由 Actions 自動、安全地部署到您的伺服器——是最大化此工具價值的正確方式。
安全與維運需並行：建立一個安全的備份策略，定期備份包含金鑰的資料卷，並將其儲存在異地。採用受控的手動更新流程，避免因自動更新失敗而導致的服務中斷。
自動化管理的重要性：本專案提供的 setup.sh 和 manage.sh 腳本大幅簡化了部署和日常維運工作。這種工具化的方法不僅提高了效率，更重要的是降低了人為錯誤的風險，確保系統的長期穩定運行。
遵循本報告中概述的原則和步驟，任何具備一定技術能力的實踐者都能夠成功部署並長期運營一個不僅功能強大，而且在安全性、彈性和可維護性方面都達到專業水準的個人 VPN 服務。這不僅是對個人數位隱私的有力保障，也是一次深入實踐現代 DevOps 和 SRE 理念的寶貴經驗。
Works cited
How to Self-Host Your Own WireGuard VPN: A Comprehensive Guide, accessed June 22, 2025, https://onedollarvps.com/blogs/wireguard-self-hosted
WireGuard: fast, modern, secure VPN tunnel, accessed June 22, 2025, https://www.wireguard.com/
WireGuard vs OpenVPN: 7 Key Differences in 2025 - CyberInsider, accessed June 22, 2025, https://cyberinsider.com/vpn/wireguard/wireguard-vs-openvpn/
Find out which VPN protocol is better in this WireGuard vs OpenVPN comparison - Netmaker, accessed June 22, 2025, https://www.netmaker.io/resources/wireguard-vs-openvpn
WireGuard VPN Advantages and Disadvantages - Oudel Inc., accessed June 22, 2025, https://blog.oudel.com/wireguard-vpn-advantages-and-disadvantages/
OpenVPN vs WireGuard: Top Two VPN Protocols Side By Side - GoodAccess, accessed June 22, 2025, https://www.goodaccess.com/blog/openvpn-vs-wireguard
WireGuard: The Next-Generation VPN Protocol - Startup Defense, accessed June 22, 2025, https://www.startupdefense.io/blog/wireguard-the-next-generation-vpn-protocol
Docker Advantages and Disadvantages: What You Need to Know Before You Switch, accessed June 22, 2025, https://duplocloud.com/blog/docker-advantages-and-disadvantages/
OpenVPN vs. WireGuard Comparison - zenarmor.com, accessed June 22, 2025, https://www.zenarmor.com/docs/network-security-tutorials/openvpn-vs-wireguard
OpenVPN vs. Wireguard -fastest protocol on Mac? - Troubleshooting and Problems - AirVPN, accessed June 22, 2025, https://airvpn.org/forums/topic/57083-openvpn-vs-wireguard-fastest-protocol-on-mac/
WireGuard: A Quick Overview - Cohesive Networks, accessed June 22, 2025, https://cohesive.net/wireguard-overview/
How does the implementation of WireGuard in modern VPN services enhance both performance and security compared to traditional protocols like OpenVPN or IKEv2? - Quora, accessed June 22, 2025, https://www.quora.com/How-does-the-implementation-of-WireGuard-in-modern-VPN-services-enhance-both-performance-and-security-compared-to-traditional-protocols-like-OpenVPN-or-IKEv2
WireGuard - Wikipedia, accessed June 22, 2025, https://en.wikipedia.org/wiki/WireGuard
OpenVPN vs. WireGuard: What's the Difference? - Rublon, accessed June 22, 2025, https://rublon.com/blog/openvpn-vs-wireguard-whats-the-difference/
What is Docker?, accessed June 22, 2025, https://docs.docker.com/get-started/docker-overview/
Self-Hosting Docker vs Cloud-Based Docker: Pros and Cons - RunCloud, accessed June 22, 2025, https://runcloud.io/blog/self-hosting-docker-vs-cloud-based-docker
Explain to me what are Docker's use cases just as if you are explaining to a not 5, but 10yr old kid. : r/selfhosted - Reddit, accessed June 22, 2025, https://www.reddit.com/r/selfhosted/comments/1ki7mhk/explain_to_me_what_are_dockers_use_cases_just_as/
10 Reasons Why Developers Love Docker - Gcore, accessed June 22, 2025, https://gcore.com/blog/10-reasons-why-developers-love-docker
Docker Compose, accessed June 22, 2025, https://docs.docker.com/compose/
Ate329/cloudflare-DDNS-script: A Bash script for automatic updating of Cloudflare DNS records with many nice features. - GitHub, accessed June 22, 2025, https://github.com/Ate329/cloudflare-DDNS-script
jmrplens/Cloudflare-DNS-Updater: Bash script to update, create or delete IPv4 and IPv6 records in @Cloudflare. - GitHub, accessed June 22, 2025, https://github.com/jmrplens/Cloudflare-DNS-Updater
DDNS Cloudflare Bash Script - GitHub, accessed June 22, 2025, https://github.com/fire1ce/DDNS-Cloudflare-Bash
MohamedElashri/dd2cf: DDNS script to update cloudflare A records - GitHub, accessed June 22, 2025, https://github.com/MohamedElashri/dd2cf
How to setup a Self Hosted VPN using Wireguard and Netmaker, accessed June 22, 2025, https://www.netmaker.io/resources/self-hosted-vpn
Best 100+ Docker Containers for Home Server - Bit Doze, accessed June 22, 2025, https://www.bitdoze.com/docker-containers-home-server/
How to Check if Your ISP Performs CGNAT - PureVPN, accessed June 22, 2025, https://www.purevpn.com/blog/how-to-check-whether-or-not-your-isp-performs-cgnat/
How to Tell If You're Behind a CGNAT - Chuck Carroll, accessed June 22, 2025, https://chuck.is/cgnat/
What Is My IP Address - See Your Public Address - IPv4 & IPv6, accessed June 22, 2025, https://whatismyipaddress.com/
IP.me: What is my IP address? | Find my public IP address, accessed June 22, 2025, https://ip.me/
How to Check If Your ISP Performs CGNAT - PurePrivacy, accessed June 22, 2025, https://www.pureprivacy.com/blog/check-if-your-isp-performs-cgnat/
Diagnosing CGNAT and Public IPv4 - Anyone Docs, accessed June 22, 2025, https://docs.anyone.io/relay/troubleshooting-common-issues/diagnosing-cgnat-and-public-ipv4
Wireguard connects, but no LAN or Internet available on it - Ubiquiti Community, accessed June 22, 2025, https://community.ui.com/questions/Wireguard-connects-but-no-LAN-or-Internet-available-on-it/fb8ecdbc-6756-4542-9d20-62e07d2da417
Wireguard - Handshake for peer did not complete after 5 seconds - Server Fault, accessed June 22, 2025, https://serverfault.com/questions/1166439/wireguard-handshake-for-peer-did-not-complete-after-5-seconds
Complete guide to self-hosting a website through Cloudflare Tunnel - Fullmetalbrackets, accessed June 22, 2025, https://fullmetalbrackets.com/blog/self-host-website-cloudflare-tunnel/
What is principle of least privilege? | Zero Trust - Cloudflare, accessed June 22, 2025, https://www.cloudflare.com/en-ca/learning/access-management/principle-of-least-privilege/
Announcing the General Availability of API Tokens - The Cloudflare Blog, accessed June 22, 2025, https://blog.cloudflare.com/api-tokens-general-availability/
Cloudflare API Tokens Announced No Longer Need Global API Key - Centmin Mod, accessed June 22, 2025, https://community.centminmod.com/threads/cloudflare-api-tokens-announced-no-longer-need-global-api-key.18241/
Create API token · Cloudflare Fundamentals docs, accessed June 22, 2025, https://developers.cloudflare.com/fundamentals/api/get-started/create-token/
Creating an API Token for Cloudflare | IO River Documentation, accessed June 22, 2025, https://www.ioriver.io/docs/Guides/CDN%20Providers/Creating%20an%20API%20Token%20in%20Cloudflare/
Cloudflare DNS | Certify The Web Docs, accessed June 22, 2025, https://docs.certifytheweb.com/docs/dns/providers/cloudflare/
Account roles · Cloudflare Fundamentals docs, accessed June 22, 2025, https://developers.cloudflare.com/fundamentals/manage-members/roles/
UFW settings for a VPN on a Rasperry Pi - Super User, accessed June 22, 2025, https://superuser.com/questions/1836054/ufw-settings-for-a-vpn-on-a-rasperry-pi
How to Set Up Port Forwarding on Any Router - No-IP, accessed June 22, 2025, https://www.noip.com/support/knowledgebase/general-port-forwarding-guide
How to Port Forward on Your Router - HelloTech, accessed June 22, 2025, https://www.hellotech.com/guide/for/how-to-port-forward
How to safely port-forward a game server? - Routers - Alta Labs, accessed June 22, 2025, https://forum.alta.inc/t/how-to-safely-port-forward-a-game-server/4635
How to Locally Host Multiplayer Game Servers (With Port Forwarding) - Instructables, accessed June 22, 2025, https://www.instructables.com/Port-Forwarding-and-you-Your-guide-to-your-locally/
wireguard - LinuxServer.io, accessed June 22, 2025, https://docs.linuxserver.io/images/docker-wireguard/
linuxserver/wireguard - Docker Image, accessed June 22, 2025, https://hub.docker.com/r/linuxserver/wireguard
linuxserver/docker-wireguard - GitHub, accessed June 22, 2025, https://github.com/linuxserver/docker-wireguard
Home - wg-easy, accessed June 22, 2025, https://wg-easy.github.io/wg-easy/v15.0/
wg-easy/wg-easy: The easiest way to run WireGuard VPN + Web-based Admin UI. - GitHub, accessed June 22, 2025, https://github.com/wg-easy/wg-easy
Easy WireGuard VPN Setup with Docker and WG-Easy - YouTube, accessed June 22, 2025, https://www.youtube.com/watch?v=3aRENOYwlcM
Using WireGuard Easy with Pi Hole - GitHub, accessed June 22, 2025, https://github.com/wg-easy/wg-easy/wiki/Using-WireGuard-Easy-with-Pi-Hole
WG Easy - open source, self hosted Wireguard server setup tool with a simple, intuitive web UI! - YouTube, accessed June 22, 2025, https://www.youtube.com/watch?v=BRLB4wRL4cM
docker-wireguard/docker-compose.yml at main · Websoft9test/docker-wireguard - GitHub, accessed June 22, 2025, https://github.com/Websoft9test/docker-wireguard/blob/main/docker-compose.yml
How to setup WireGuard VPN with Docker - Antoine Brossault, accessed June 22, 2025, https://www.antoinebrossault.com/how-to-setup-wireguard-vpn-with-docker/
Understanding PUID and PGID - LinuxServer.io, accessed June 22, 2025, https://docs.linuxserver.io/general/understanding-puid-and-pgid/
aptalca/docker-wireguard - GitHub, accessed June 22, 2025, https://github.com/aptalca/docker-wireguard
Set up Wireguard VPN in Docker on Raspberry Pi - David Sha, accessed June 22, 2025, https://blog.davidsha.me/wireguard-vpn-setup/
wireguard docker container internal_subnet - Reddit, accessed June 22, 2025, https://www.reddit.com/r/WireGuard/comments/117g4pr/wireguard_docker_container_internal_subnet/
How to add more peers to a running Wireguard server in a container (exposed through a public IP) - Reddit, accessed June 22, 2025, https://www.reddit.com/r/WireGuard/comments/15wwnxi/how_to_add_more_peers_to_a_running_wireguard/
rycochet/docker-cloudflare-ddns, accessed June 22, 2025, https://hub.docker.com/r/rycochet/docker-cloudflare-ddns
oznu/cloudflare-ddns - Docker Image, accessed June 22, 2025, https://hub.docker.com/r/oznu/cloudflare-ddns/
favonia/cloudflare-ddns - Docker Image, accessed June 22, 2025, https://hub.docker.com/r/favonia/cloudflare-ddns
A small, feature-rich, and robust Cloudflare DDNS updater - GitHub, accessed June 22, 2025, https://github.com/favonia/cloudflare-ddns
WireGuard Server – VPN Docker Container - CHNS.tech, accessed June 22, 2025, https://chns.tech/2024/03/17/wireguard-server-vpn-docker-container/
How to set up WireGuard VPN Client on Android Phone and iPhone | TP-Link Nordic, accessed June 22, 2025, https://www.tp-link.com/nordic/support/faq/3986/
Configure WireGuard VPN Clients - Tutorials - ditatompel Insights, accessed June 22, 2025, https://insights.ditatompel.com/en/tutorials/configure-wireguard-vpn-clients/
Generating WireGuard QR codes for fast mobile deployments - Server Side Up, accessed June 22, 2025, https://serversideup.net/blog/generating-wireguard-qr-codes-for-fast-mobile-deployments/
How to manually configure WireGuard on Android - Proton VPN, accessed June 22, 2025, https://protonvpn.com/support/wireguard-manual-android
What is my IP address location? Find out here - NordVPN, accessed June 22, 2025, https://nordvpn.com/what-is-my-ip/
What's My IP Address? | See Your IP Location Now - ExpressVPN, accessed June 22, 2025, https://www.expressvpn.com/what-is-my-ip
Configuration as Code: Everything to Know - BrowserStack, accessed June 22, 2025, https://www.browserstack.com/guide/configuration-as-code
Git-Driven Infrastructure: Why Configuration as Code Beats Click-and-Deploy, accessed June 22, 2025, https://devcenter.upsun.com/posts/why-configuration-as-code-beats-click-and-deploy/
Configuration as Code (CaC): A guide for DevOps teams | CircleCI, accessed June 22, 2025, https://circleci.com/blog/configuration-as-code/
Docker compose Gitops using Github Actions - FarisZR, accessed June 22, 2025, https://fariszr.com/docker-compose-gitops-github/
Backup my configuration and restore to new system : r/WireGuard - Reddit, accessed June 22, 2025, https://www.reddit.com/r/WireGuard/comments/ym3lbt/backup_my_configuration_and_restore_to_new_system/
Update Docker - Keep y... - OSiA, accessed June 22, 2025, https://wiki.opensourceisawesome.com/books/updating-docker-containers/page/update-docker-keep-your-data-too
My recipe for backing up and restoring Docker configurations and data with minimal hassle, accessed June 22, 2025, https://forum.level1techs.com/t/my-recipe-for-backing-up-and-restoring-docker-configurations-and-data-with-minimal-hassle/224034
Best practices on updating/maintaining Docker containers : r/selfhosted - Reddit, accessed June 22, 2025, https://www.reddit.com/r/selfhosted/comments/10f78jb/best_practices_on_updatingmaintaining_docker/
How to update existing images with docker-compose? - Stack Overflow, accessed June 22, 2025, https://stackoverflow.com/questions/49316462/how-to-update-existing-images-with-docker-compose
How to Update Docker Image and Container using docker-compose - YouTube, accessed June 22, 2025, https://www.youtube.com/watch?v=29-BVcbytYc&pp=0gcJCdgAo7VqN5tD
how do i setup Cloudflare tunnel for wire guard vpn? : r/selfhosted - Reddit, accessed June 22, 2025, https://www.reddit.com/r/selfhosted/comments/1kbelsj/how_do_i_setup_cloudflare_tunnel_for_wire_guard/
How to Bypass CGNAT - Exposing your home server to the internet with TLS/SSL pass through | Aiquiral's Blog, accessed June 22, 2025, https://blog.aiquiral.me/bypass-cgnat
How to bypass CGNAT - ℹ️ Support - Nextcloud community, accessed June 22, 2025, https://help.nextcloud.com/t/how-to-bypass-cgnat/165234
mochman/Bypass_CGNAT: Wireguard setup to bypass CGNAT with a VPS - GitHub, accessed June 22, 2025, https://github.com/mochman/Bypass_CGNAT
Yet another CGNAT VPS bypass setup : r/selfhosted - Reddit, accessed June 22, 2025, https://www.reddit.com/r/selfhosted/comments/m0n2te/yet_another_cgnat_vps_bypass_setup/
Serving Web Services Behind CGNAT with Cloudflare Tunnel - eddiez.me, accessed June 22, 2025, https://eddiez.me/working-around-cgnat/
Understanding GitHub Actions, accessed June 22, 2025, https://docs.github.com/articles/getting-started-with-github-actions
GitHub Terms for Additional Products and Features, accessed June 22, 2025, https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features
Run Database in GitHub Actions, Persisting Data to S3, and Access it Publicly | WeSQL, accessed June 22, 2025, https://wesql.io/blog/use-github-actions-as-database
About self-hosted runners - GitHub Docs, accessed June 22, 2025, https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners
About GitHub's IP addresses, accessed June 22, 2025, https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/about-githubs-ip-addresses
Steps for exposing a port to the Web and port forwarding on EC2 - GitHub Gist, accessed June 22, 2025, https://gist.github.com/cgcardona/a368494a89f0a11b383948e460c56804
GitHub Actions Runtime Security - Filter Network Traffic, accessed June 22, 2025, https://github.com/step-security/github-actions-goat/blob/main/docs/Solutions/RestrictOutboundTraffic.md
nat-traversal-github-actions-openvpn-wireguard/README.md at master, accessed June 22, 2025, https://github.com/ValdikSS/nat-traversal-github-actions-openvpn-wireguard/blob/master/README.md
GitHub Acceptable Use Policies, accessed June 22, 2025, https://docs.github.com/en/site-policy/acceptable-use-policies/github-acceptable-use-policies
Troubleshooting Wireguard connection - Beginner Basics - MikroTik community forum, accessed June 22, 2025, https://forum.mikrotik.com/t/troubleshooting-wireguard-connection/178310
[Solved] Wireguard - No handshake - OPNsense Forum, accessed June 22, 2025, https://forum.opnsense.org/index.php?topic=43997.0
Troubleshooting WireGuard VPN - Ubuntu Server documentation, accessed June 22, 2025, https://documentation.ubuntu.com/server/how-to/wireguard-vpn/troubleshooting/
Quick Start - WireGuard, accessed June 22, 2025, https://www.wireguard.com/quickstart/
Troubleshooting WireGuard DNS Issues - Pro Custodibus, accessed June 22, 2025, https://www.procustodibus.com/blog/2023/09/troubleshooting-wireguard-dns-issues/
Wireguard connected, no internet connection - Reddit, accessed June 22, 2025, https://www.reddit.com/r/WireGuard/comments/1bzijzc/wireguard_connected_no_internet_connection/
Why am I connected to my peer with WireGuard but no internet access? - Super User, accessed June 22, 2025, https://superuser.com/questions/1793987/why-am-i-connected-to-my-peer-with-wireguard-but-no-internet-access
How to use UFW firewall with Docker containers? - - jarrousse.org, accessed June 22, 2025, https://blog.jarrousse.org/2023/03/18/how-to-use-ufw-firewall-with-docker-containers/
Does it matter if Docker ignores UFW rules - General, accessed June 22, 2025, https://forums.docker.com/t/does-it-matter-if-docker-ignores-ufw-rules/144087
